# Go Strategy App - 跨平台 UI/UX 設計規範書

> **文件版本**: 1.1
> **更新日期**: 2026-01-26
> **適用平台**: Mobile (Flutter), Web (Streamlit/React), Desktop
> **目標**: 建立單一資訊來源 (Source of Truth)，確保所有平台實作一致的視覺與互動體驗。

---

## 1. 核心視覺系統 (Core Visual System)

### 1.1 色票 (Color Palette)
所有平台必須嚴格遵守以下色碼，不可自行調整顏色。

**建議棋步分級 (Suggestion Tiers)**
| 等級 (Tier) | 意義 | 顏色 (Color) | Hex Code |透明度 (Opacity) |
|---|---|---|---|---|
| **Rank 1** | **最佳一手 (Best)** | <span style="color:#2196F3">█</span> **藍色 (Blue)** | `#2196F3` | Fill: 70%, Stroke: 100% |
| **Rank 2** | **好手 (Good)** | <span style="color:#4CAF50">█</span> **綠色 (Green)** | `#4CAF50` | Fill: 70%, Stroke: 100% |
| **Rank 3** | **普通 (OK)** | <span style="color:#FF9800">█</span> **橘色 (Orange)** | `#FF9800` | Fill: 70%, Stroke: 100% |
| **Rank 4+** | **不推薦** | **隱藏** | N/A | 不顯示 |

**棋盤與元件**
| 元件 | 描述 | Hex Code / 樣式 |
|---|---|---|
| **棋盤底色** | 榧木色 / Burlywood | `#DEB887` |
| **格線 (Grid)** | 深灰色 | `#212121` (線寬 1px) |
| **星位 (Star)** | 黑色圓點 | `#000000` (半徑為格寬的 12%) |
| **錯誤/警告** | 危險操作提示 | `#D32F2F` (Red 700) |

---

## 2. 棋盤呈現規範 (Board Visualization)

### 2.1 棋子渲染 (Stones)
為了營造擬真感，棋子不應只是純色圓形。

*   **尺寸**: 半徑 (Radius) 為格子寬度的 **45%** (預留 10% 間隙)。
*   **黑棋**:
    *   主色: `#000000`
    *   高光 (Highlight): 放射狀漸層 (Radial Gradient)，中心點偏移 (-0.3, -0.3)，由 `#616161` (Grey 700) 過渡到 `#000000`。
*   **白棋**:
    *   主色: `#FFFFFF`
    *   陰影 (Keep Texture): 放射狀漸層，由 `#FFFFFF` 過渡到 `#E0E0E0` (Grey 300)。
    *   邊框: `#BDBDBD` (Grey 400)，寬度 1px (確保白子在淺色棋盤上清晰可見)。
*   **落影 (Drop Shadow)**: 所有棋子下方需繪製黑色半透明陰影 (Opacity 30%, Blur 2px, Offset 1px)。

### 2.2 建議棋步顯示 (Suggestions Override)
當 AI 分析完成後，棋盤上**僅顯示 Top 3 等級**的建議點。

*   **形狀**: 圓形 (半徑為格子寬度的 35%)。
*   **樣式**: 
    - **填充**: 對應等級顏色，透明度 70%。
    - **邊框**: 對應等級顏色，不透明 (100%)，寬度 2px。
*   **文字**: 圓圈中央顯示排名數字 (1, 2, 3)。
    - 字體: 等寬或 Sans-serif 粗體。
    - 顏色: 白色 `#FFFFFF`。

### 2.3 手數顯示 (Move Numbers)
手數顯示為可切換選項 (Toggle)，預設關閉。開啟時：
*   **位置**: 顯示於棋子正中央。
*   **顏色自動對比**:
    - 黑棋上的數字: **白色** `#FFFFFF`
    - 白棋上的數字: **黑色** `#000000`
*   **字體**: 確保數字清晰可讀，不應超出棋子範圍。

---

## 3. 分析面板規範 (Analysis Panel UI)

### 3.1 佈局結構
*   **Top Bar (Tabs)**:
    1.  **"Analysis" (分析)**: 顯示目前局面的勝率圖表與推薦棋步列表。
    2.  **"History Record" (歷史紀錄)**: 顯示整盤棋的落子順序列表。
*   **內容區域**: 需支援滾動 (Scrollable)，高度固定或自適應剩餘空間。

### 3.2 分析列表 (Analysis List)
列表項目必須包含以下欄位，且排列緊湊：

1.  **Rank Indicator (排名)**:
    - 圓形徽章，背景色對應 Rank 1/2/3 顏色 (藍/綠/橘)。
    - 中央顯示數字 (1, 2, 3)。
2.  **座標 (Coordinate)**:
    - 格式: `[Column][Row]` (例如 `Q16`, `D4`)。
    - 字體: 粗體，強調顯示。
3.  **勝率 (Winrate)**:
    - 顯示該手棋後的勝率 (例如 `Win: 48.5%`)。
4.  **目數差 (Lead)**:
    - 顯示預估領先/落後目數 (例如 `Lead: +1.5` 或 `-0.5`)。
5.  **訪問數 (Visits)** (可選):
    - 顯示 AI 模擬次數 (例如 `2.1k v`)，靠右對齊，顏色較淡。

### 3.3 歷史紀錄列表 (History List)
*   **樣式**: 簡潔的條列式 (ListTile)。
*   **Leading Icon**: 
    - 一個小的棋子圖示 (黑底白字或白底黑字)，顯示該手的手數 (1, 2, 3...)。
*   **文字內容**:
    - `Move [N]: [Color] [Coord]` (例如 `Move 15: Black R16`)。
*   **互動**: 點擊某一行，棋盤應**即時還原**到該手數的盤面狀態。

---

## 4. 互動邏輯 (Interaction Logic)

### 4.1 規則強制 (Rule Enforcement)
App 必須強制執行圍棋規則，不可允許無效落子：
1.  **已有棋子處**: 不可落子。
2.  **打劫 (Ko)**: 若落子處為剛被提子的「劫材點」且局面復原，則**禁止落子**。UI 應給予震動或 Toast 提示。
3.  **自殺 (Suicide)**: 若落子後該子(及相連棋串)氣數為 0 且未提掉對手任何子，則**禁止落子**。
4.  **提子 (Capture)**: 落子後，若鄰近對手棋串氣數變為 0，必須**立即移除**對手死子。

### 4.2 分析觸發
*   **落子後自動觸發**: 若設定開啟，玩家落子後應自動開始後台分析。
*   **手動觸發**: 提供 "Analyze" 按鈕。
*   **狀態顯示**: 分析進行中必須顯示 "Loading..." 或進度條，避免使用者誤以為當機。

---

## 5. 驗收檢查表 (QA Checklist)

開發或測試人員請依此表確認實作是否符合規範：

- [ ] **顏色正確性**: Rank 1 是藍色，Rank 2 是綠色，Rank 3 是橘色？
- [ ] **排名限制**: 棋盤與列表中是否都**只**顯示 Top 3？(Rank 4+ 是否已隱藏)
- [ ] **手數顯示**: 開啟開關後，黑白棋子上的數字顏色是否正確反轉？
- [ ] **提子邏輯**: 包圍對手棋子後，死子是否立即消失？
- [ ] **打劫限制**: 是否無法在打劫點立即回提？
- [ ] **歷史紀錄**: 歷史列表是否正確記錄了每一手的座標與顏色？

---
*備註：若各平台原生元件樣式 (Native UI) 與本規範有衝突，以「顏色定義」與「資訊層級」為最高優先級，元件外觀可適度調整。*
